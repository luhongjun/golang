# go tool pprof

## 参考资料

- [go tool pprof](https://www.bookstack.cn/read/go_command_tutorial/0.12.md)

go tool pprof命令来交互式的访问概要文件的内容。命令将会分析指定的概要文件，并会根据我们的要求为我们提供高可读性的输出信息。

在Go语言中，我们可以通过标准库的代码包runtime和runtime/pprof中的程序来生成三种包含实时性数据的概要文件，分别是CPU概要文件、内存概要文件和程序阻塞概要文件。

下面我们先来分别介绍用于生成这三种概要文件的API的用法：

1. CPU概要文件

Go语言的运行时系统会以100 Hz的的频率对CPU使用情况进行取样。实际上，这里所说的对CPU使用情况的取样就是对当前的Goroutine的堆栈上的程序计数器的取样。由此，我们就可以从样本记录中分析出哪些代码是计算时间最长或者说最耗CPU资源的部分了。

2. 内存概要文件

用于保存在用户程序执行期间的内存使用情况。这里所说的内存使用情况，其实就是程序运行过程中堆内存的分配情况。Go语言运行时系统会对用户程序运行期间的所有的堆内存分配进行记录。不论在取样的那一时刻、堆内存已用字节数是否有增长，只要有字节被分配且数量足够，分析器就会对其进行取样。

3. 程序阻塞概要文件

用于保存用户程序中的Goroutine阻塞事件的记录